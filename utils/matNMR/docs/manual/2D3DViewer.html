<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
   "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

	<link rel=stylesheet type="text/css" href="Manual.css">

	<title>matNMR Manual Page: 2D/3D viewer</title>

	<script type="text/javascript">
	<!--
	window.defaultStatus ="Remember: if you want flexibility, matNMR is the right choice!"
	// -->
	</script>
</head>

<body>
<a name="Intro"></a>
<h1>Chapter 6 - The 2D/3D Viewer</h1>

<p>The 2D/3D Viewer is started using the nmr2d.m script, i.e. type 'nmr2d' at the Matlab prompt to start it.</p>

<a name="Look"></a>
<h2>6.1 General Appearance</h2>

<p>The general appearance of the 2D/3D Viewer window consists of two parts and is shown in the figures 
below:<br><br>
A typical data window:<br></p>
<center><IMG SRC="../pics/2D3DViewerWindow.jpg" ALT="2D/3D viewer"></center>
<p><br>and the panel window:</p>
<center><IMG SRC="../pics/2D3DViewerPanel.jpg" ALT="2D/3D panel"></center>

<p>The 2D/3D Viewer is a multi-window multi-plot routine: an arbitrary number of windows can be
opened (simultaneously) and they can all have an arbitrary number of subplots (only limited by the 
number of pre-defined subplot configurations matNMR allows). All data windows are controlled from the 
panel window. Any function executed from here will apply to the current axis in the current
2D/3D Viewer window. The current axis is always marked by a box around it. The current figure though 
is not always so clearly recognizable. In general the current figure will be pulled in front before 
executing a plotting command, making it clear what the current figure window is. In general it is 
<b>NOT</b> sufficient to pull the window in front if one wants to make a figure the current figure! 
The preferred way of selecting a window therefore is to click on the "Select" button in the top left 
corner of the window, or alternatively inside the window (Not on the menubar!).</p>

<p>Although this routine is multi-window multi-plot only one set of variables is kept in memory (for
more information on memory usage see also paragraph 3.7, <a href="matNMRMATLAB.html#Memory">
"Memory usage"</a>). This means that only the matrix (and axis vectors etc.) belonging to the <b>last 
plotted spectrum</b> is stored. This is important to realize because it affects certain routines that
use the matrix for extracting spectral intensities like Integrate, peak picking, get position, etc. 
These only function properly for the last plotted spectrum. And although they may not produce any errors, 
the result may still be wrong! Some plot parameters are stored into the figure window and they contain
some information on each specific plot in the figure:<br>
<b>-name</b><br>
<b>-axis vectors:</b> extracting axis coordinates will work properly even when the plot does not belong to
the last plotted spectrum!<br>
<b>-processing history</b><br><br>
Furthermore certain properties of the current figure are saved:<br>
<b>-number of subplots</b><br>
<b>-axis handles</b><br>
<b>-colorbar flags for each axis</b><br>
<b>-colorbar handles</b><br>
<b>-zoom flag</b><br>
<b>-rotate3D flag</b><br><br>
All these parameters are stored into the userdata property of the figure (for more information on 
properties of graphics objects see the MATLAB documentation). Extracting this property (e.g. QTEMP=
get(gcf, 'userdata')) will result in a structure variable. Users can add fields to it (in principle
the userdata property is free to be manipulated in any way and can therefore be useful for various
things) but shouldn't removed the fields that matNMR has created sofar as this will produce errors.
.
</p>

<p>The functions panel window will be explained in paragraph 6.2, just below and the menubar in the data 
windows in paragraph 6.3, <a href="2D3DViewer.html#Menubar">"The menubar"</a>.</p>



<a name="Panel"></a>
<h2>6.2 The panel window</h2>

<p>The panel window has been subdivided into the four major plot types currently supported by matNMR,
contours, mesh, Stack 3D and raster plot and a tools menu. They will be explained separately below.
Note that although the functions explained below are separated into discrete categories they can
be used as general functions.</p>

<p>Note that all the items in the "Tools" menu can be started also from the Plotmanipulations
menu in the menubar.</p>

<a name="Contours"></a>
<h3>6.2.1 Contours</h3>
<p>
<table border=yes align=center>
<tr>
<th>Button</th>
<th>Function</th>
</tr>

<tr><td>Contour</td><td>Popup button for selecting the type of contour plot. Currently supported
are the three MATLAB contour routines <i>contour</i> (normal contours), <i>contourf</i> (filled
contours) and <i>contour3</i> (contours plotted at their corresponding z-level). See the MATLAB
documentation for more information on these routines.</td></tr>

<tr><td>Real</td><td>Popup button for selecting whether to plot the real, the imaginary or the
absolute value of a matrix.</td></tr>

<tr><td>Relative Contours</td><td>This function allows plotting relative contours, i.e. the contour
levels are specified as a percentage of the maximum intensity of a matrix. The following input
window will appear:<br><br><center>
<IMG SRC="../pics/ContourInput.jpg" ALT="relative contours"></center><br>
The following fields must be specified:<br>
<table border=yes align=center>
<tr>
<th>Field</th>
<th>Function</th>
</tr>

<tr><td>Name Spectrum</td><td>This must be either a name of a matrix variable in the workspace or a
function generating a matrix as output. In case the variable is a matNMR structure (see also
paragraph 3.5, <a href="matNMRMATLAB.html#Format">"matNMR format for spectra"</a>) then
the routine will extract the corresponding axis vectors (and history etc) that were saved
into it. If axis vectors are specified in this input window (see below) for Td2 and/or TD1
then these are used and not the axis vectors as saved in the structure.</td></tr>

<tr><td>Lower contour limit</td><td>Defines the lower contour limit as a percentage of the maximum
intensity of the matrix.</td></tr>

<tr><td>Upper contour limit</td><td>Defines the upper contour limit as a percentage of the maximum
intensity of the matrix.</td></tr>

<tr><td>Multiplier</td><td>A number that specifies the non-linearity of the increment between contour 
levels. If (Multiplier = 1) then the increment between contour levels is the same for all contour
levels. If (0 < Multiplier < 1) then more contours are drawn towards the high end of the range as defined
by the lower and upper limits. If (Multiplier > 1) then more contour levels are drawn towards the
lower end of the range.</td></tr>

<tr><td>Number of contours</td><td>The total number of contour levels in the plot. When both positive
and negative contours are asked for then a vector of two numbers may be given to denote different
numbers of contours for positive and negative intensities. If only one number is specified then
both positive and negative intensities have the same number of contours.</td></tr>

<tr><td>Type of contours</td><td>This determines how the contour levels will be calculated. 
This can either be a) positive contours (i.e. relative to the positive maximum), (b) negative contours
(i.e. relative to the negative maximum), c) both positive and negative contours (relative to the 
respective positive and negative maxima), d) both positive and negative contours but relative to the
positive maximum or e) both positive and negative contours but relative to the negative maximum of
the spectrum. Note that for the last three options the number
of contours is doubled (if a contour level is set at 0, the number of contours is doubled minus 1).
A special colormap will be generated when printing both positive and negative contours.</td></tr>

<tr><td>Vector for TD2-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Vector for TD1-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Linespec</td><td>Leaving this empty will plot the contours as a MATLAB <i>patch</i> (for more
information on this see the MATLAB documentation), meaning it will use a colormap. 
Specifying the linespec causes MATLAB to plot the contours as line plots. See the MATLAB documentation
for more information on colormaps and linespec properties.</td></tr>

<tr><td>Plotting Macro</td><td>Allows for a plotting macro to be executed immediately after
the plot is made, in order to reduce rendering time. See also paragraph 4.4, 
<a href="Processing.html#Macros">"Using macro's"</a>.</td></tr>
</table></td></tr>



<tr><td>Absolute Contours</td><td>This function allows plotting absolute contours, i.e. the contour
levels are specified directly by the user. The following input
window will appear:<br><br><center>
<IMG SRC="../pics/ContourInput2.jpg" ALT="absolute contours"></center><br>
The following fields must be specified:<br>
<table border=yes align=center>
<tr>
<th>Field</th>
<th>Function</th>
</tr>

<tr><td>Name Spectrum</td><td>This must be either a name of a matrix variable in the workspace or a
function generating a matrix as output. In case the variable is a matNMR structure (see also
paragraph 3.5, <a href="matNMRMATLAB.html#Format">"matNMR format for spectra"</a>) then
the routine will extract the corresponding axis vectors (and history etc) that were saved
into it. If axis vectors are specified in this input window (see below) for Td2 and/or TD1
then these are used and not the axis vectors as saved in the structure.</td></tr>

<tr><td>Vector with contour levels</td><td>A variable in the workspace containing the contour
level intensities.</td></tr>

<tr><td>Vector for TD2-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Vector for TD1-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Linespec</td><td>Leaving this empty will plot the contours as a MATLAB <i>patch</i> (for more
information on this see the MATLAB documentation), meaning it will use a colormap. 
Specifying the linespec causes MATLAB to plot the contours as line plots. See the MATLAB documentation
for more information on colormaps and linespec properties.</td></tr>

<tr><td>Plotting Macro</td><td>Allows for a plotting macro to be executed immediately after
the plot is made, in order to reduce rendering time. See also paragraph 4.4, 
<a href="Processing.html#Macros">"Using macro's"</a>.</td></tr>
</table></td></tr>
</table>




<a name="Mesh"></a>
<h3>6.2.2 Mesh 3D</h3>
<p>
<table border=yes align=center>
<tr>
<th>Button</th>
<th>Function</th>
</tr>

<tr><td>Mesh</td><td>Popup button for selecting the type of surface plot. Currently supported
are the eight MATLAB routines <i>mesh</i> (normal mesh), <i>meshc</i> (mesh + contours underneith),
<i>meshz</i> (mesh with curtain), <i>surf</i> (normal surface), <i>surfc</i> (surface with a
contour plot underneith), <i>surfl</i> (surface with lichting effects), <i>pcolor</i> (pseudo-color
plot, i.e. a top-projection of the surface) and <i>waterfall</i> (a waterfall plot). See the MATLAB
documentation for more information on these routines. A word of caution must be made for using the
waterfall plot as it has proven be not so stable in the past! Sometimes it used to take ages to
finish.</td></tr>

<tr><td>Real</td><td>Popup button for selecting whether to plot the real, the imaginary or the
absolute value of a matrix.</td></tr>

<tr><td>Both</td><td>Defines whether to draw mesh grid lines in both matrix dimensions or just 
along the rows (TD2) or columns (TD1). This property only affects mesh plots, not surface plots.</td></tr>

<tr><td>Mesh 3D Plot</td><td>This function allows plotting mesh and surface plots. The following input
window will appear:<br><br><center>
<IMG SRC="../pics/MeshInput.jpg" ALT="mesh"></center><br>
The following fields must be specified:<br>
<table border=yes align=center>
<tr>
<th>Field</th>
<th>Function</th>
</tr>

<tr><td>Name Spectrum</td><td>This must be either a name of a matrix variable in the workspace or a
function generating a matrix as output. In case the variable is a matNMR structure (see also
paragraph 3.5, <a href="matNMRMATLAB.html#Format">"matNMR format for spectra"</a>) then
the routine will extract the corresponding axis vectors (and history etc) that were saved
into it. If axis vectors are specified in this input window (see below) for Td2 and/or TD1
then these are used and not the axis vectors as saved in the structure.</td></tr>

<tr><td>Azimuthal</td><td>Defines the azimuth angle or better the horizontal rotation angle for the 
resulting view (see MATLAB documentation for more information on <i>view</i>). The view can
always be changed by using the Rotate3D function in the Tools section (described below).</td></tr>

<tr><td>Elevation</td><td>Defines the elevation angle or better the vertical rotation angle for the 
resulting view (see MATLAB documentation for more information on <i>view</i>). The view can
always be changed by using the Rotate3D function in the Tools section (described below).</td></tr>

<tr><td>Vector for TD2-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Vector for TD1-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Plotting Macro</td><td>Allows for a plotting macro to be executed immediately after
the plot is made, in order to reduce rendering time. See also paragraph 4.4, 
<a href="Processing.html#Macros">"Using macro's"</a>.</td></tr>
</table></td></tr>
</table>




<a name="Stack3D"></a>
<h3>6.2.3 Stack 3D</h3>

<p>
3D Stack plots are plots in which, along one dimension of the matrix, the lines are stacked such
that a spatial view is obtained. This can be very useful for watching decays etc.<br>
<table border=yes align=center>
<tr>
<th>Button</th>
<th>Function</th>
</tr>

<tr><td>Lower z-limit</td><td>Defines the lower zlimit for the plot. If not defined before plotting
a new matrix then matNMR will set it to the default axis settings after plotting the matrix.</td></tr>

<tr><td>Upper z-limit</td><td>Defines the upper zlimit for the plot. If not defined before plotting
a new matrix then matNMR will set it to the default axis settings after plotting the matrix.</td></tr>

<tr><td>Real</td><td>Popup button for selecting whether to plot the real, the imaginary or the
absolute value of a matrix.</td></tr>

<tr><td>Y-dir default</td><td>Defines the default axis direction for the plot. Usually this is
set to right-to-left for NMR spectra but this is not necessarily what is needed for a plot.</td></tr>

<tr><td>Stack 3D</td><td>This function allows plotting 3D stack plots. The following input
window will appear:<br><br><center>
<IMG SRC="../pics/Stack3DInput.jpg" ALT="stack 3D"></center><br>
The following fields must be specified:<br>
<table border=yes align=center>
<tr>
<th>Field</th>
<th>Function</th>
</tr>

<tr><td>Name Spectrum</td><td>This must be either a name of a matrix variable in the workspace or a
function generating a matrix as output. In case the variable is a matNMR structure (see also
paragraph 3.5, <a href="matNMRMATLAB.html#Format">"matNMR format for spectra"</a>) then
the routine will extract the corresponding axis vectors (and history etc) that were saved
into it. If axis vectors are specified in this input window (see below) for Td2 and/or TD1
then these are used and not the axis vectors as saved in the structure.</td></tr>

<tr><td>Dimension along x-axis</td><td>Determines which matrix dimension to put along the x-axis,
i.e. in which direction to stack the rows/columns.</td></tr>

<tr><td>Azimuthal</td><td>Defines the azimuth angle or better the horizontal rotation angle for the 
resulting view (see MATLAB documentation for more information on <i>view</i>). The view can
always be changed by using the Rotate3D function in the Tools section (described below).</td></tr>

<tr><td>Elevation</td><td>Defines the elevation angle or better the vertical rotation angle for the 
resulting view (see MATLAB documentation for more information on <i>view</i>). The view can
always be changed by using the Rotate3D function in the Tools section (described below).</td></tr>

<tr><td>Vector for TD2-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Vector for TD1-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Plotting Macro</td><td>Allows for a plotting macro to be executed immediately after
the plot is made, in order to reduce rendering time. See also paragraph 4.4, 
<a href="Processing.html#Macros">"Using macro's"</a>.</td></tr>
</table></td></tr>

<tr><td>z-axis</td><td>Allows switching the z-axis on or off from displaying.</td></tr>

<tr><td>y-tick</td><td>Allows switching the tickmarks along the y-axis on or off from displaying.</td></tr>
</table>




<a name="Raster2D"></a>
<h3>6.2.4 Raster 2D</h3>

<p>
The raster plot can be used for making quick low-resolution pictures of big spectra by undersampling
the matrix. The matrix is divided in blocks as big as the sampling size and the intensity over the
block is integrated.<br>
<table border=yes align=center>
<tr>
<th>Button</th>
<th>Function</th>
</tr>

<tr><td>Sampling</td><td>Defines the sampling size (in points) for the current spectrum. Note that
setting a value into this edit button immediately takes effect on the current matrix.</td></tr>

<tr><td>Real</td><td>Popup button for selecting whether to plot the real, the imaginary or the
absolute value of a matrix.</td></tr>

<tr><td>Raster 2D</td><td>This function allows plotting 2D raster plots. The following input
window will appear:<br><br><center>
<IMG SRC="../pics/RasterInput.jpg" ALT="raster 2D"></center><br>
The following fields must be specified:<br>
<table border=yes align=center>
<tr>
<th>Field</th>
<th>Function</th>
</tr>

<tr><td>Name Spectrum</td><td>This must be either a name of a matrix variable in the workspace or a
function generating a matrix as output. In case the variable is a matNMR structure (see also
paragraph 3.5, <a href="matNMRMATLAB.html#Format">"matNMR format for spectra"</a>) then
the routine will extract the corresponding axis vectors (and history etc) that were saved
into it. If axis vectors are specified in this input window (see below) for Td2 and/or TD1
then these are used and not the axis vectors as saved in the structure.</td></tr>

<tr><td>Dimension along x-axis</td><td>Determines which matrix dimension to put along the x-axis,
i.e. in which direction to stack the rows/columns.</td></tr>

<tr><td>Azimuthal</td><td>Defines the azimuth angle or better the horizontal rotation angle for the 
resulting view (see MATLAB documentation for more information on <i>view</i>). The view can
always be changed by using the Rotate3D function in the Tools section (described below).</td></tr>

<tr><td>Elevation</td><td>Defines the elevation angle or better the vertical rotation angle for the 
resulting view (see MATLAB documentation for more information on <i>view</i>). The view can
always be changed by using the Rotate3D function in the Tools section (described below).</td></tr>

<tr><td>Vector for TD2-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Vector for TD1-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Plotting Macro</td><td>Allows for a plotting macro to be executed immediately after
the plot is made, in order to reduce rendering time. See also paragraph 4.4, 
<a href="Processing.html#Macros">"Using macro's"</a>.</td></tr>
</table></td></tr>

<tr><td>z-axis</td><td>Allows switching the z-axis on or off from displaying.</td></tr>

<tr><td>y-tick</td><td>Allows switching the tickmarks along the y-axis on or off from displaying.</td></tr>
</table>



<a name="Tools"></a>
<h3>6.2.5 Tools</h3>

<p>The Tools section contains a few functions that are often needed while working with the 2D/3D
Viewer. All of them can also be found in the "Plot manipulations" entry in the menubar (for more
information on the plot manipulations see paragraph 6.3.2, <a href="2D3DViewer.html#PlotManipulations">
"Plot manipulations"</a>).<br>

<table border=yes align=center>
<tr>
<th>Button</th>
<th>Function</th>
</tr>

<tr><td>Cut spectrum</td><td>This function allows to make a slice-plot of a 2D spectrum by defining strips of
frequencies in both dimenions. A new variable "QmatNMR.Spec2D3DCutSpectrum" will be created which contains
these blocks of the spectrum. This variable may then be called by any of the plotting routines and the blocks
will be shown separated by a dotted line. After pushing this button use the mouse to define the strips. Afterwards
an input window will be openened and the coordinates can be specified more accurately. NOTE that using the 
corresponding function in the menubar avoids having to define the coordinates by mouse again!</td></tr>

<tr><td>Define plot</td><td>It is often most efficient to make a low-quality plot of a spectrum, zoom 
into the region of interest and then replot it in high quality. This function allows to do so, by creating
a new variable "QmatNMR.Spec2D3DDefinePlot" with the zoomed-in part of the spectrum and the axes. This
variable may then be used as input for the subsequent plotting action.</td></tr>

<tr><td>Get Position</td><td>Like the "Get Position" routine in the main window (see paragraph
5.1, <a href="MainWindow.html#Look">"General Appearance"</a>) this routine provides a means
of scanning the matrix. The coordinates in both dimensions for the position of the crosshair and 
the intensity is shown on screen. Note that the intensity is only valid for the last plotted
spectrum. The coordinates should always be correct though!</td></tr>

<tr><td>Axis rulers</td><td>This allows changing the axis vectors for the current matrix. Similar to
the way it is done in the main window (see paragraph 5.2.5, <a href="MainWindow.html#PlotManipulations">
"Plot manipulations"</a>) the axis vectors can be set to either PPM, Hz, time, points or to a user-
defined vector. The following window is opened:<br><br>
<center><IMG SRC="../pics/AxisRulers.jpg" ALT="axis ruler"></center>
<br>First the type of axis vector (PPM, Hz, time, points, user-defined) can be chosen. The spectral width
must be specified for PPM and Hz axes and for a PPM axis also the carrier frequency. For
axes in Hz also the signs of the gyromagnetic ratios of the nuclei that correspond to the respective
dimensions of the spectrum must be specified.<br>
The button labeled "Connect to variable?" can be checked if the new axes must be connected to the
spectrum. If the spectrum wasn't yet a matNMR structure then it will be made into one in order to
be able to allow the connection.<br>
Pressing the "Continue" button proceeds the routine and one is asked for the reference values. After 
that the reference peak can be specified by using the crosshair mouse pounter and clicking on the 
desired reference peak (This may seem strange but is necessary because of a MATLAB bug. Specifying the
reference peak before asking its value leads to a mess with the main and input window). If a name is
given for the new axis vector(s) then it/they will be saved in the workspace after calculating it.
</td></tr>

<tr><td>Title/labels</td><td>This routine provides a means of changing the title and axes labels
of the current axis. A window will appear looking like:<br><br><center><IMG SRC="../pics/1DTitleAxisLabels.jpg" ALT="title and labels"></center><br>
Pressing the "Apply" button will update all labels immediately. The "Refresh" is used for updating
the text labels currently written in this window to the labels in the current axis (useful when
having this window opened continously).</td></tr>

<tr><td>Print</td><td>Prints the current 2D/3D Viewer window to the default printer as defined in
the $matlabroot/toolbox/local/printopt.m file.</td></tr>

<tr><td>Hold</td><td>Switches the hold flag for the current axis. Upon activating this, every
consecutive plot is superposed on the existing plots. (see the MATLAB 
documentation for more information on the <i>hold</i> command).</td></tr>

<tr><td>Zoom</td><td>Switches the zoom flag for the current window. Upon activating this, the
rotate3D flag is switched off and the standard MATLAB <i>zoom</i> is activated (see the MATLAB 
documentation for more information on the <i>zoom</i> command). Zooming in can be done using
the left mouse button (either by clicking or by dragging a box around the desired area)
whereas the right button zooms out.</td></tr>

<tr><td>Rotate3D</td><td>Switches the rotate3D flag for the current window. Upon activating
this the zoom flag is switched off and the standard MATLAB <i>rotate3d</i> command is activated
(see the MATLAB documentation for more information on the <i>rotate3d</i> command). The plot
can be rotated by moving the mouse while having the left mouse button pressed in the desired
axis.</td></tr>

<tr><td>Colorbar</td><td>Adds or removes a colorbar from the current axis.</td></tr>

<tr><td>Colormap</td><td>Allows changing of the colormap for the current 2D/3D Viewer window.
Beware that colormaps are a figure property and therefore different axes cannot have different
color maps. This popup button contains a few of the standard MATLAB colormaps and some others. The
QPosNeg colormaps are altered upon plotting a contour plot with both positive and
negative contours, such that the cental colour always denotes the zero-level. Selecting
these in any other case will show the full colormap. To adjust those colormaps according to the
degree of positive and negative intensities in the spectrum, select "Adjust PosNeg".<br><br>
All colormaps may be inverted by selecting the corresponding item from the list.</td></tr>

<tr><td>Shading</td><td>Sets the shading property (for more information see the MATLAB
documentation).</td></tr>
</table>






<a name="Menubar"></a>
<h2>6.3 The menubar</h2>

<p>The menubar contains some useful features for the 2D/3D Viewer. All entries will be explained 
here separately. Note that many of the functions may also be accessed from the
context menus that are defined. Context menus may be accessed by right-clicking anywhere within the
figure window, but not on top of an axis! To reduce rerendering by Matlab, it is most efficient to
move the 2D/3D viewer window to the far left of the screen, and to access the context menu from the
far right of the 2D/3D viewer window.</p>



<a name="Stop"></a>
<h3>6.3.1 Stop 2D/3D Viewer</h3>

<p>This function allows close the current 2D/3D Viewer window, stop the 2D/3D Viewer, stop matNMR 
completely or quit MATLAB. Depending on whether the exit safety flag was set (see paragraph 2.2.1, 
<a href="Installation.html#GeneralOptions">"General options"</a>) an input window will appear to ask
for confirmation. For quiting MATLAB the user is always asked for confirmation. Note that when 
stopping matNMR <b>ALL</b> windows belonging to matNMR are closed, including the main window. 
Stopping only the 2D/3D Viewer will not affect any other routines though.</p>






<a name="PlotManipulations"></a>
<h3>6.3.2 Plot manipulations</h3>

<p>This menu contains all kinds of functions to change the appearance of the current axis and/or
the current 2D/3D Viewer window.<br>
<table border=yes align=center>
<tr>
<th>Name</th>
<th>Function</th>
</tr>


<tr><td>New window</td><td>This will open a new 2D/3D Viewer window and make it the current
figure window. The number of subplots are the same as in the window from which this function
was started. The zoom/rotate3D state is also kept. The colormap and colorbar settings are set 
back to default however.</td></tr>


<tr>
<td><a name="SubPlots"></a>Subplots</td><td>This changes the subplot configuration in the current window. An
extensive set of subplot configurations are allowed. To efficiently work with subplots please refer to the
support of 3D matrices, paragraph 4.2, <a href="Processing.html#1D2DMode">"1D, 2D and 3D mode"</a>, and
the use of plotting macros, paragraph 4.4, <a href="Processing.html#Macros">"Using macro's"</a>.</td></tr>


<tr><td>Zoom</td><td>Switches the zoom flag for the current figure window. If the zoom is 
activated then the rotate3D is deactivated. This uses the MATLAB <i>zoom</i> function. Please
see the MATLAB documentation for more information.</td></tr>


<tr><td>Rotate3D</td><td>Switches the rotate3D flag for the current figure window. If the rotate3D is 
activated then the zoom is deactivated. This uses the MATLAB <i>rotate3d</i> function. Please
see the MATLAB documentation for more information.</td></tr>


<tr><td>Plotting Functions</td><td>This contains all plotting routines supported by matNMR
and not just those presented in the panel window.
<table border=yes align=center>
<tr>
<th>Name</th>
<th>Function</th>
</tr>


<tr><td>Bar 2D</td><td>Creates a 2D bar plot. The following input
window will appear:<br><br><center>
<IMG SRC="../pics/Bar2DInput.jpg" ALT="2D bar"></center><br>
The following fields must be specified:<br>
<table border=yes align=center>
<tr>
<th>Field</th>
<th>Function</th>
</tr>

<tr><td>Name Spectrum</td><td>This must be either a name of a matrix variable in the workspace or a
function generating a matrix as output. In case the variable is a matNMR structure (see also
paragraph 3.5, <a href="matNMRMATLAB.html#Format">"matNMR format for spectra"</a>) then
the routine will extract the corresponding axis vectors (and history etc) that were saved
into it. If axis vectors are specified in this input window (see below) for Td2 and/or TD1
then these are used and not the axis vectors as saved in the structure.</td></tr>

<tr><td>Vector for x-axis</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Linespec</td><td>Leaving this empty will plot the bars as done using the standard
bar plotting routine in Matlab (for more information on this see the MATLAB documentation)
, meaning it will use a colormap. Specifying the linespec causes MATLAB to plot the bars as 
line plots. See the MATLAB documentation for more information on colormaps and linespec properties.</td></tr>

<tr><td>Plotting Macro</td><td>Allows for a plotting macro to be executed immediately after
the plot is made, in order to reduce rendering time. See also paragraph 4.4, 
<a href="Processing.html#Macros">"Using macro's"</a>.</td></tr>
</table></td></tr>


<tr><td>Bar 3D</td><td>Creates a 3D bar plot. The following input
window will appear:<br><br><center>
<IMG SRC="../pics/Bar3DInput.jpg" ALT="3D bar"></center><br>
The following fields must be specified:<br>
<table border=yes align=center>
<tr>
<th>Field</th>
<th>Function</th>
</tr>

<tr><td>Name Spectrum</td><td>This must be either a name of a matrix variable in the workspace or a
function generating a matrix as output. In case the variable is a matNMR structure (see also
paragraph 3.5, <a href="matNMRMATLAB.html#Format">"matNMR format for spectra"</a>) then
the routine will extract the corresponding axis vectors (and history etc) that were saved
into it. If axis vectors are specified in this input window (see below) for Td2 and/or TD1
then these are used and not the axis vectors as saved in the structure.</td></tr>

<tr><td>Azimuth</td><td>The azimuthal angle for a 3D view, in degrees.</td></tr>

<tr><td>Elevation</td><td>The elevation angle for a 3D view, in degrees.</td></tr>

<tr><td>The type of object</td><td>Whether square bars are wanted or cylinders.</td></tr>

<tr><td>Vector for TD2</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Vector for TD1</td><td>A variable in the workspace corresponding to the axis vector
for this dimension. Leaving this empty will give an axis in points unless the "Name Spectrum" is a 
matNMR structure (see "Name Spectrum"). Specifying an axis vector will overrule any axis vector
saved in the variable structure.</td></tr>

<tr><td>Plotting Macro</td><td>Allows for a plotting macro to be executed immediately after
the plot is made, in order to reduce rendering time. See also paragraph 4.4, 
<a href="Processing.html#Macros">"Using macro's"</a>.</td></tr>
</table></td></tr>


<tr><td><a href="2D3DViewer.html#Contours">Contours (abs)</a></td><td>More details can be found in the section of the panel window.</td>


<tr><td><a href="2D3DViewer.html#Contours">Contours (rel)</a></td><td>More details can be found in the section of the panel window.</td>


<tr><td>Line plot</td><td>This function creates a line plot of the 1D spectrum that it requires
as input. In case a 2D matrix is given then this results in a series of line plots distributed
over the available subplots.<br>
The following input window will appear:<br><br><center>
<IMG SRC="../pics/LineInput.jpg" ALT="line"></center><br>
The following fields must be specified:<br>
<table border=yes align=center>
<tr>
<th>Field</th>
<th>Function</th>
</tr>

<tr><td>Name Spectrum</td><td>This must be either a name of a matrix variable in the workspace or a
function generating a matrix as output. In case the variable is a matNMR structure (see also
paragraph 3.5, <a href="matNMRMATLAB.html#Format">"matNMR format for spectra"</a>) then
the routine will extract the corresponding axis vectors (and history etc) that were saved
into it. If axis vectors are specified in this input window (see below) for Td2 and/or TD1
then these are used and not the axis vectors as saved in the structure.</td></tr>

<tr><td>axis</td><td>Whether or not to print an axis system around the polar plot.
Only limited control is available over the axis system currently.</td></tr>

<tr><td>Linespec</td><td>Leaving this empty will plot the bars as done using the standard
line plotting routine in Matlab (for more information on this see the MATLAB documentation). 
Specifying the linespec may result in different colours and markers and such. See the MATLAB 
documentation for more information on linespec properties.
</td></tr>

<tr><td>Plotting Macro</td><td>Allows for a plotting macro to be executed immediately after
the plot is made, in order to reduce rendering time. See also paragraph 4.4, 
<a href="Processing.html#Macros">"Using macro's"</a>.</td></tr>

</table></td></tr>


<tr><td>Polar plot</td><td>This function creates a polar plot using a stereographic projection.
A 2D matrix where the dimensions correspond to two polar angles is assumed.<br>
The following input window will appear:<br><br><center>
<IMG SRC="../pics/PolarInput.jpg" ALT="polar"></center><br>
The following fields must be specified:<br>
<table border=yes align=center>
<tr>
<th>Field</th>
<th>Function</th>
</tr>

<tr><td>Name Spectrum</td><td>This must be either a name of a matrix variable in the workspace or a
function generating a matrix as output. In case the variable is a matNMR structure (see also
paragraph 3.5, <a href="matNMRMATLAB.html#Format">"matNMR format for spectra"</a>) then
the routine will extract the corresponding axis vectors (and history etc) that were saved
into it. If axis vectors are specified in this input window (see below) for Td2 and/or TD1
then these are used and not the axis vectors as saved in the structure.</td></tr>


<tr><td>axis</td><td>Whether or not to print an axis system around the polar plot.
Only limited control is available over the axis system currently.</td></tr>



<tr><td>plot type</td><td>This determines whether to print it as a surface (pcolor) or
as a contour plot. If the pcolor is chosen then no other options must be given. If absolute
contours are asked for then only the vector with contour levels must be given. For relative
contours all but the vector of contour levels must be given. Please see the corresponding
sections for more details on <a href="2D3DViewer.html#Contours">contour plots</a> and
<a href="2D3DViewer.html#Mesh">surface plots</a>. </td></tr>

<tr><td>Plotting Macro</td><td>Allows for a plotting macro to be executed immediately after
the plot is made, in order to reduce rendering time. See also paragraph 4.4, 
<a href="Processing.html#Macros">"Using macro's"</a>.</td></tr>

</table></td></tr>



<tr><td><a href="2D3DViewer.html#Raster2D">Raster 2D</a></td><td>More details can be found in the section of the panel window.</td>


<tr><td><a href="2D3DViewer.html#Mesh">Surface</a></td><td>More details can be found in the section of the panel window.</td>


<tr><td><a href="2D3DViewer.html#Stack3D">Stack 3D</a></td><td>More details can be found in the section of the panel window.</td></tr>
</table>
</td></tr>


<tr><td>Features</td><td>

<table border=yes align=center>
<tr>
<th>Field</th>
<th>Function</th>
</tr>

<tr><td>Axis rulers</td><td>This allows changing the axis vectors for the current matrix. Similar to
the way it is done in the main window (see paragraph 5.2.5, <a href="MainWindow.html#PlotManipulations">
"Plot manipulations"</a>) the axis vectors can be set to either PPM, Hz, time, points or to a user-
defined vector. The following window is opened:<br><br>
<center><IMG SRC="../pics/AxisRulers.jpg" ALT="axis rulers"></center>
<br>First the type of axis vector (PPM, Hz, time, points, user-defined) can be chosen. The spectral width
must be specified for PPM and Hz axes and for a PPM axis also the carrier frequency. For
axes in Hz also the signs of the gyromagnetic ratios of the nuclei that correspond to the respective
dimensions of the spectrum must be specified.<br>
The button labeled "Connect to variable?" can be checked if the new axes must be connected to the
spectrum. If the spectrum wasn't yet a matNMR structure then it will be made into one in order to
be able to allow the connection.<br>
Pressing the "Continue" button proceeds the routine and one is asked for the reference values. After 
that the reference peak can be specified by using the crosshair mouse pounter and clicking on the 
desired reference peak (This may seem strange but is necessary because of a MATLAB bug. Specifying the
reference peak before asking its value leads to a mess with the main and input window). If a name is
given for the new axis vector(s) then it/they will be saved in the workspace after calculating it.
</td></tr>


<tr><td>Color Bar</td><td>Adds or removes a colorbar from the current axis. If the colorbar
must be printable in MIF format then select the corresponding button in the input window.
The colorbar will then be plotted as 150 filled contours instead of the default image.</td></tr>


<tr><td>Color Mapping (caxis)</td><td>This allows setting the colormapping for the current axis,
i.e. what range of values the colormap should cover. The minimum and maximum specified here 
are connected to the first and last color in the colormap. This uses the MATLAB command <i>caxis</i>. 
See the MATLAB documentation for more information.</td></tr>


<tr><td>Print</td><td>Prints the current 2D/3D Viewer window to the default printer as defined in
the $matlabroot/toolbox/local/printopt.m file.</td></tr>


<tr><td>Super title</td><td>Allows writing a line of text into the super-title axis. This axis
is invisible and cannot be accessed directly. A text of certain font size and rotation angle will be 
written into the axis which by default is put in the top of the figure. The position of the text can be 
changed by dragging the mouse while clicking on the text with the left button. Clicking the right 
mouse over the text will bring up a menu to change the text properties.</td></tr>


<tr><td>Title/axis labels</td><td>This routine provides a means of changing the title and axes labels
of a plot. A window will appear looking like:<br><br><center><IMG SRC="../pics/1DTitleAxisLabels.jpg" ALT="title and labels"></center><br>
Pressing the "Apply" button will update all labels immediately. The "Refresh" is used for updating
the text labels currently written in this window to the labels in the current plot (useful when
having this window opened continously).</td></tr>


<tr><td>Extract area</td><td>Allows extracting part of the current spectrum by mouse selection. 
Dragging a box using the mouse will define the limits. A window will appear for confirmation.
Input is done in the unit of the axis vectors.</td></tr>


<tr><td>Define cut limits</td><td>This function is used to make a contour plot of the current spectrum
while cutting away certain areas. An input window will appear looking like:
<br><br><center><IMG SRC="../pics/CutSpectrumInput.jpg" ALT="cut plot"></center><br>
Ranges in both TD1 and TD2 must be specified in pairs of coordinates in the unit of the axis
vectors, defining the beginning and end of a range. A new variable "QmatNMR.Spec2D3DCutSpectrum"
will be generated, which can then be used as input to any of the various plot types.<br>
In total this determines the ranges in both dimensions of the spectrum. A new matrix will be
generated, using the current matrix, consisting only of the desired areas. An arbitrary number of  ranges may be specified for each dimension. In the plot separation lines will be plotted which look
is depending on the linespec that can be given in the input window. By default a dotted white line 
is drawn. Tickmarks can also be specified for each dimension separately.<br>
</td></tr>


<tr><td>Define plot limits</td><td>It is often most efficient to make a low-quality plot of a spectrum, zoom 
into the region of interest and then replot it in high quality. This function allows to do so, by creating
a new variable "QmatNMR.Spec2D3DDefinePlot" with the zoomed-in part of the spectrum and the axes. This
variable may then be used as input for the subsequent plotting action.</td></tr>


<tr><td>Get position</td><td>Like the "Get Position" routine in the main window (see paragraph
5.1, <a href="MainWindow.html#Look">"General Appearance"</a>) this routine provides a means
of scanning the matrix. The coordinates in both dimensions for the position of the crosshair and 
the intensity is shown on screen. Note that the intensity is only valid for the last plotted
spectrum. The coordinates should always be correct though!</td></tr>


<tr><td>Get integral</td><td>Allows for getting the absolute integral of a designated part
of the spectrum. The range must be specified using the mouse (drag a box using the left mouse 
button). The sum intensity over the specified region of the spectrum is given in the MATLAB 
main window (MATLAB prompt).</td></tr>


<tr><td>Set integral</td><td>Allows for setting the absolute integral of the entire spectrum.
A range must be specified using either the mouse (drag a box using the left mouse button) or
the input window. Input of the coordinate ranges is given in the unit of the axis vectors.
The sum intensity over the specified region of the spectrum is set to the integral value given 
in the input window.</td></tr>


<tr><td>Create CPMs</td><td>Allows the creation of Conditional Probability Matrices (CPMs) from crosspeaks
in 2D NMR spectra. For a description of the idea please see the paper JACS 127 (2005), 4466-4475.
By selecting the area of a crosspeak, using the left mouse button, the CPMs are defined in a new
window. The new window will show the selected area, the projections onto both axes and the corresponding
CPMs. Before starting one must define a lower threshold and the number of contours used in the plots
of the CPMs. For best results use a low threshold, e.g. 1%, and many contours, e.g. 25.<br>
NOTE 1: the inherent numerical instability of CPMs makes it necessary to limit the selected region to fit
closely around the peak. Areas that contain much noise will invariably produce lots of artefacts in the CPMs.
<br>
NOTE 2: should the routine fail to produce nice plots, typically caused by numerical instabilities, then
it is foreseen that the CPMs are replotted manually. Directly after making a CPM, click on the corresponding axis
that needs to be replotted. Then make a plot in the normal way, for CPMs typically a relative contour plot.
The axis vectors for the CPMs are called QmatNMR.CPMvec1 (TD2) and QmatNMR.CPMvec2 (TD1), whilst the CPMs themselves are called
QmatNMR.CPM1 and QmatNMR.CPM2. Thus the plots can be redrawn at will.
<br>
NOTE 3: the super title that is drawn in the window by default can, as usual, be edited by right-clicking on it!
</td></tr>


<tr><td>Peak picking</td><td>MatNMR offers a simple (but limited) peak picking routine.
Basically peaks can be specified and the coordinates and intensities belonging to these
peaks are stored in a list. The variable used by matNMR is QmatNMR.PeakList. Peak lists are
saved in the structure (for more information see paragraph 3.5, <a href="matNMRMATLAB.html#Format">
"matNMR format for spectra"</a>) that contains either a spectrum or an FID. When redrawing
a spectrum matNMR will detect the peak list and redraw the lines between and labels for all peaks.
Lines can be deleted at any point by clicking the left mouse button on them. Text labels can
be changed by clicking the left mouse button on them.<br>
There are two peak picking modes: one which just detects the peaks and puts a text label near the
peak and one in which also lines are drawn between consecutive peaks. Whether or not a line must 
be drawn between two peaks is also stored in the list. Peaks are selected by dragging a box, using 
the left mouse button, over a region in the spectrum in which the peak is situated. Depending on 
the search specifications a peak is detected and added to the list. Clicking the middle mouse button
will remove the last entry of the peak list. Using the "clear list" entry from the menubar will 
delete the entire list. 
Peak picking will stay active until it is stopped by clicking the right mouse button. It can be
activated again at any time and new peaks will just be appended to the list.<br>
The peak list can be connected to either a structure variable in the workspace (note that if the
designated variable is not already a structure it will be turned into one) or an ASCII file on
disk.<br>
Peak picking also works after the "Cut contour plot" function has been executed. Furthermore when
a contour plot contained a peak list at the time that the "Cut contour plot" was executed, it
will be redrawn into the sliced plot properly. Changing the axis vectors, using the "Axis rulers"
option will also not affect the peak list as long as axis vectors with linear increments are used.
The coordinates in the peak list will be transformed to the corresponding coordinates in the
units of the new axis vectors.
</td></tr>
</table>
</td></tr>

<tr><td>Direct Manipulations</td><td>The rest of this menu consists of various axis properties.
More explanation concerning these can be found in the MATLAB documentation. Note the difference
between changing plot properties using this menu and by changing the properties using the
options menu (see also paragraph 2.2, <a href="Installation.html#Setup">"Setting up matNMR"</a>):
changes made with these functions only affect the current plot and not the general matNMR
settings.</td></tr>

</table>



<a name="History"></a>
<h3>6.3.3 History / Macro</h3>

<table border=yes align=center>
<tr>
<th>Name</th>
<th>Function</th>
</tr>

<tr><td>Show History</td><td>This routine shows the processing history for the current spectrum
(either 1D or 2D). A window will appear looking like:<br><br><center><IMG SRC="../pics/ShowHistory.jpg" ALT="history">
</center><br>
The "Print" button allows to print the history to a printer or to disk. A separate window will be
opened in which the history is plotted as graphical text (Unfortunatelt this is necessary because it is 
much more difficult to print text in UI-controls than graphical text in MATLAB).
</td></tr>


<tr><td>Start recording macro</td><td>Starts the recording of a new plotting macro (see also paragraph 
4.4, <a href="Processing.html#Macros">"Using macro's"</a>).</td></tr>


<tr><td>Stop recording macro</td><td>Stop the recording of a macro. An input window
will appear to ask for a name of a variable in the workspace to store the new macro in.
(see also paragraph 4.4, <a href="Processing.html#Macros">"Using macro's"</a>)</td></tr>


<tr><td>Execute macro</td><td>This routine executes a macro.
(see also paragraph 4.4, <a href="Processing.html#Macros">"Using macro's"</a>)</td></tr>


<tr><td>Execute macro stepwise</td><td>This routine executes a macro stepwise. The same
window as used for "Reprocess from history stepwise" (see above) will appear .</td></tr>

</table>



<a name="PrintingMenu"></a>
<h3>6.3.4 Printing menu</h3>

<p>The printing menu is a general feature available from all matNMR windows that is used for printing.
Using a separate window the MATLAB print command (see the MATLAB documentation for more information
on print) can be executed. More information on the printing menu is given in paragraph 7.1, 
<a href="matNMROutput.html#PrintingMenu">"Printing menu"</a>.</p>



<a name="CopyFigure"></a>
<h3>6.3.5 Copy figure</h3>

<p>This function will copy the current view of the main window into a separate window, but without
the UI-controls. This will give something like:<br><br></p>
<center><IMG SRC="../pics/CopyFigureMain.jpg" ALT="copy figure"></center>
<p><br>The menubar of this new window contains the standard MATLAB menubar which has some useful
features for printing and saving the figure. It also offers the possibility to change axis properties
and stuff (More information on this menubar can be found in the MATLAB documentation). Additional
features in the menubar are the MATLAB zoom and rotate3D functions, the matNMR "Get Position" (for more
information see paragraph 5.1, <a href="MainWindow.html#Look">"General appearance"</a>) and the 
printing menu (for more information see paragraph 7.1, <a href="matNMROutput.html#PrintingMenu">
"Printing menu"</a>).
</p>



<a name="Options"></a>
<h3>6.3.6 Options</h3>

<p>This menu contains a subset of matNMR properties that can be changed as for the 2D/3D
Viewer not all menus are needed. Please use the menu in the main window for changing all
other options. This menu allows changing the default settings of the screen settings and 
the text properties in matNMR as is described in detail in paragraph 2.2, 
<a href="Installation.html#Setup">"Setting up matNMR (options)"</a>.</p>



<a name="Help"></a>
<h3>6.3.7 Help</h3>

<p>Besides the simple "About matNMR" and "Copyright" notices this contains a direct link to
this manual from inside MATLAB. The browser, defined in the $matlabroot/toolbox/local/docopt.m
file, will be opened and the matNMR manual will appear (See the MATLAB documentation for more
information on the MATLAB web and docopt commands). As the manual is included in the matNMR
distribution reading the manual should be faster than using the matNMR website.</p>



<a name="ClearFunctions"></a>
<h3>6.3.8 Clear functions</h3>

<p>This performs the MATLAB "clear functions" command. All compiled functions are deleted from
memory forcing MATLAB to recompile each function again upon running it. This is useful when working
with your own m-files (or changing the matNMR code) to force MATLAB to use the altered function (See 
the MATLAB documentation for more information on the MATLAB clear command). Furthermore the mouse 
pointer is set to an arrow head.</p>

<p>
  <a href="http://validator.w3.org/check?uri=referer"><img border="0"
      src="http://www.w3.org/Icons/valid-html401"
      alt="Valid HTML 4.01!" height="31" width="88"></a>
</p>

</body>
</html>
